<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»™æ¸©æœæ¸…çš„æ˜Ÿç©º</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+QingKe+HuangYou&family=Ma+Shan+Zheng&family=Long+Cang&display=swap" rel="stylesheet">
    <style>
        /* åŸºç¡€é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
            -webkit-overflow-scrolling: touch;
        }
        
        body {
            background: #0a0a2a;
            color: #f5f5f5;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            font-family: 'Ma Shan Zheng', serif;
        }
        
        /* åŠ¨æ€æ˜Ÿç©ºèƒŒæ™¯ */
        .star-field {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
        }
        
        .shooting-star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 8px white;
        }
        
        /* ä¸»å®¹å™¨ */
        .main-container {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            padding: 20px 15px;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        /* ç²¾ç¾æ ‡é¢˜ - ä¿®å¤å­—ä½“é—´è·é—®é¢˜ */
        .title-section {
            text-align: center;
            padding: 20px 20px 30px;
            position: relative;
            overflow: hidden;
        }
        
        .title-wrapper {
            position: relative;
            display: inline-block;
            margin-bottom: 20px;
        }
        
        .main-title {
            font-family: 'ZCOOL QingKe HuangYou', cursive;
            font-size: 3.5rem;
            color: #fff;
            text-shadow: 
                0 0 5px #ff6b6b,
                0 0 10px #ff6b6b,
                0 0 20px #ff6b6b,
                0 0 40px #ffd93d,
                0 0 80px #ffd93d;
            letter-spacing: 1px;
            position: relative;
            z-index: 2;
            animation: titleGlow 3s ease-in-out infinite alternate;
            line-height: 1.2;
            white-space: nowrap;
        }
        
        .title-subtitle {
            font-family: 'Long Cang', cursive;
            font-size: 1.8rem;
            color: #a8d8ea;
            margin-top: 20px;
            line-height: 1.6;
            position: relative;
            display: inline-block;
        }
        
        .title-subtitle::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #ffd93d, transparent);
        }
        
        @keyframes titleGlow {
            0%, 100% { 
                text-shadow: 
                    0 0 5px #ff6b6b,
                    0 0 10px #ff6b6b,
                    0 0 20px #ff6b6b,
                    0 0 40px #ffd93d;
            }
            50% { 
                text-shadow: 
                    0 0 10px #ff6b6b,
                    0 0 20px #ff6b6b,
                    0 0 40px #ff6b6b,
                    0 0 80px #ffd93d,
                    0 0 100px #ffd93d;
            }
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .main-title {
                font-size: 2.5rem;
                letter-spacing: 0.5px;
                white-space: normal;
            }
            
            .title-subtitle {
                font-size: 1.4rem;
            }
        }
        
        /* ä¸­å¿ƒæ˜Ÿæ˜Ÿ */
        .center-star-container {
            display: flex;
            justify-content: center;
            margin: 40px 0;
        }
        
        .center-star {
            width: 120px;
            height: 120px;
            background: #ffd93d;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            position: relative;
            animation: starFloat 6s ease-in-out infinite;
            cursor: pointer;
            box-shadow: 0 0 50px #ffd93d;
        }
        
        .center-star::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 140%;
            height: 140%;
            background: radial-gradient(circle, rgba(255, 217, 61, 0.2) 0%, rgba(255, 217, 61, 0) 70%);
            border-radius: 50%;
            animation: pulse 3s ease-in-out infinite;
        }
        
        @keyframes starFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(120deg); }
            66% { transform: translateY(10px) rotate(240deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.6; transform: translate(-50%, -50%) scale(1.1); }
        }
        
        /* å¡ç‰‡ç½‘æ ¼ */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }
        
        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 217, 61, 0.1), transparent);
            transform: translateX(-100%);
        }
        
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .card:hover::before {
            animation: shine 1.5s;
        }
        
        @keyframes shine {
            100% { transform: translateX(100%); }
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .card-icon {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #ffd93d;
        }
        
        .card-title {
            font-size: 1.5rem;
            color: #ffffff;
            font-weight: 600;
        }
        
        .card-content {
            color: #e6e6fa;
            line-height: 1.6;
            font-size: 1.1rem;
        }
        
        /* è¾“å…¥æ¡†æ ·å¼ */
        .input-field {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            font-family: inherit;
            margin-bottom: 15px;
            transition: border-color 0.3s ease;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #ffd93d;
        }
        
        .textarea-field {
            min-height: 120px;
            resize: vertical;
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn:hover {
            transform: translateY(-3px);
        }
        
        .btn:active {
            transform: translateY(-1px);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #ff6b6b, #ffd93d);
            color: #0a0a2a;
        }
        
        .btn-primary:hover {
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        /* éªŒè¯ç åŒºåŸŸ */
        .verification-area {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 217, 61, 0.2);
        }
        
        .verification-title {
            color: #ffd93d;
            font-size: 1.2rem;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .verification-hint {
            color: #a8d8ea;
            font-size: 0.9rem;
            margin-bottom: 15px;
            text-align: center;
        }
        
        /* æ¶ˆæ¯æç¤º */
        .message-toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            z-index: 1000;
            font-size: 1rem;
            text-align: center;
            transition: transform 0.4s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .message-toast.show {
            transform: translateX(-50%) translateY(0);
        }
        
        /* éŸ³ä¹æ’­æ”¾å™¨ - é‡æ–°è®¾è®¡ï¼ŒåŒ…å«éŸ³ä¹é€‰æ‹© */
        .music-player {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
            max-width: 300px;
        }
        
        .music-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .music-btn {
            background: transparent;
            border: none;
            color: #a8d8ea;
            font-size: 1.4rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .music-info {
            color: #a8d8ea;
            font-size: 0.9rem;
            flex-grow: 1;
        }
        
        .music-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .music-select {
            width: 100%;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
            outline: none;
        }
        
        /* æ„¿æœ›åˆ—è¡¨ */
        .wish-list {
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .wish-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 3px solid #ffd93d;
        }
        
        /* é¡µè„š */
        footer {
            text-align: center;
            padding: 40px 15px 20px;
            color: #a8d8ea;
            font-size: 0.9rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 40px;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a2a;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        
        .loader.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid #ffd93d;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* è§¦æ‘¸ä¼˜åŒ– */
        .touch-optimized {
            touch-action: pan-y;
        }
        
        /* éšè—ç±» */
        .hidden {
            display: none;
        }
        
        /* æ˜Ÿç©ºæ—¥è®°æœ¬ */
        .diary-container {
            margin-top: 20px;
        }
        
        .diary-input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            font-family: inherit;
            min-height: 150px;
            resize: vertical;
            margin-bottom: 15px;
        }
        
        .diary-input:focus {
            outline: none;
            border-color: #ffd93d;
        }
        
        .diary-entries {
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .diary-entry {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 3px solid #a8d8ea;
        }
        
        .diary-date {
            font-size: 0.8rem;
            color: #a8d8ea;
            margin-bottom: 5px;
        }
        
        .diary-content {
            font-size: 1rem;
            line-height: 1.5;
        }
        
        /* æ•°æ®ç®¡ç†é¢æ¿ */
        .data-management {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .data-info {
            color: #a8d8ea;
            font-size: 0.9rem;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        /* æ•°æ®å¯¼å‡ºå¯¼å…¥ */
        .data-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .data-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .data-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        /* æ„¿æœ›ç»Ÿè®¡ */
        .wish-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 1.8rem;
            color: #ffd93d;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #a8d8ea;
            margin-top: 5px;
        }
        
        /* éŸ³ä¹çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .music-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #ff6b6b;
            margin-right: 8px;
            display: inline-block;
            animation: musicPulse 1.5s infinite;
        }
        
        .music-status.playing {
            background-color: #1dd1a1;
            animation: musicPulse 0.8s infinite;
        }
        
        @keyframes musicPulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body class="touch-optimized">
    <!-- åŠ è½½åŠ¨ç”» -->
    <div class="loader" id="loader">
        <div class="loader-spinner"></div>
    </div>
    
    <!-- åŠ¨æ€æ˜Ÿç©ºèƒŒæ™¯ -->
    <div class="star-field" id="starField"></div>
    
    <div class="main-container">
        <!-- ç²¾ç¾æ ‡é¢˜ -->
        <section class="title-section">
            <div class="title-wrapper">
                <h1 class="main-title" id="mainTitle">ç»™æ¸©æœæ¸…çš„æ˜Ÿç©º</h1>
            </div>
            <p class="title-subtitle">åœ¨è¿™ç‰‡ä¸ºä½ å‡†å¤‡çš„æ˜Ÿç©ºä¸‹ï¼Œè—ç€æˆ‘æƒ³å¯¹ä½ è¯´çš„è¯</p>
            
            <div class="center-star-container">
                <div class="center-star" id="centerStar"></div>
            </div>
        </section>
        
        <!-- å¡ç‰‡ç½‘æ ¼ -->
        <div class="cards-grid">
            <!-- å¡ç‰‡1: æ„¿æœ›æ¸…å• -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <h3 class="card-title">æ„¿æœ›æ¸…å•</h3>
                </div>
                <div class="card-content">
                    <p>å†™ä¸‹ä½ çš„æ„¿æœ›ï¼Œåªæœ‰é€šè¿‡éªŒè¯çš„äººæ‰èƒ½å°†æ„¿æœ›å‘é€ç»™æˆ‘ã€‚</p>
                    
                    <!-- éªŒè¯ç åŒºåŸŸ -->
                    <div class="verification-area">
                        <div class="verification-title">ğŸ” é‚®ç®±éªŒè¯</div>
                        <p class="verification-hint">è¯·è¾“å…¥éªŒè¯ç ä»¥è§£é”é‚®ç®±å‘é€åŠŸèƒ½</p>
                        <input type="password" class="input-field" id="verificationCode" placeholder="è¾“å…¥6ä½æ•°å­—éªŒè¯ç " maxlength="6" pattern="[0-9]*">
                        <div class="btn-group">
                            <button class="btn btn-primary" id="verifyBtn">éªŒè¯</button>
                            <button class="btn btn-secondary" id="hintBtn">è·å–æç¤º</button>
                        </div>
                    </div>
                    
                    <div id="wishForm" class="hidden">
                        <textarea class="input-field textarea-field" id="wishInput" placeholder="å†™ä¸‹ä½ çš„æ„¿æœ›..." maxlength="500"></textarea>
                        <input type="text" class="input-field" id="wishName" placeholder="ä½ çš„ç§°å‘¼ï¼ˆå¯é€‰ï¼‰" maxlength="20">
                        <div class="btn-group">
                            <button class="btn btn-primary" id="saveWishBtn">ä¿å­˜æ„¿æœ›</button>
                            <button class="btn btn-secondary" id="sendWishBtn">å‘é€åˆ°æˆ‘çš„é‚®ç®±</button>
                        </div>
                        
                        <!-- æ„¿æœ›ç»Ÿè®¡ -->
                        <div class="wish-stats" id="wishStats">
                            <div class="stat-item">
                                <div class="stat-number" id="totalWishes">0</div>
                                <div class="stat-label">æ„¿æœ›æ€»æ•°</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="todayWishes">0</div>
                                <div class="stat-label">ä»Šæ—¥æ–°å¢</div>
                            </div>
                        </div>
                        
                        <!-- æ„¿æœ›åˆ—è¡¨ -->
                        <div class="wish-list" id="wishList"></div>
                        
                        <!-- æ•°æ®ç®¡ç† -->
                        <div class="data-management">
                            <p class="data-info">ğŸ’¡ æ„¿æœ›æ•°æ®ä¿å­˜åœ¨æ‚¨çš„æ‰‹æœºæµè§ˆå™¨æœ¬åœ°å­˜å‚¨ä¸­ã€‚å¦‚æœæ‚¨æ›´æ¢è®¾å¤‡æˆ–æ¸…é™¤æµè§ˆå™¨æ•°æ®ï¼Œæ„¿æœ›å°†ä¼šä¸¢å¤±ã€‚å»ºè®®å®šæœŸå¤‡ä»½ã€‚</p>
                            <div class="data-actions">
                                <button class="data-btn" id="exportWishesBtn">å¯¼å‡ºæ„¿æœ›</button>
                                <button class="data-btn" id="importWishesBtn">å¯¼å…¥æ„¿æœ›</button>
                                <button class="data-btn" id="clearWishesBtn">æ¸…ç©ºæ„¿æœ›</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- å¡ç‰‡2: æ˜Ÿç©ºæ—¥è®°æœ¬ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3 class="card-title">æ˜Ÿç©ºæ—¥è®°æœ¬</h3>
                </div>
                <div class="card-content">
                    <p>è®°å½•æ¯å¤©çš„å¿ƒæƒ…å’Œæƒ³æ³•ï¼Œä¿å­˜åˆ°è¿™ç‰‡æ˜Ÿç©ºä¸­ã€‚æ—¥è®°åªä¿å­˜åœ¨æ‚¨çš„æ‰‹æœºæœ¬åœ°ã€‚</p>
                    <div class="diary-container">
                        <textarea class="diary-input" id="diaryInput" placeholder="ä»Šå¤©å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿå†™ä¸‹ä½ çš„å¿ƒæƒ…..." maxlength="1000"></textarea>
                        <div class="btn-group">
                            <button class="btn btn-primary" id="saveDiaryBtn">ä¿å­˜æ—¥è®°</button>
                            <button class="btn btn-secondary" id="clearDiaryInputBtn">æ¸…ç©ºè¾“å…¥</button>
                        </div>
                        <div class="diary-entries" id="diaryEntries"></div>
                        
                        <!-- æ—¥è®°æœ¬æ•°æ®ç®¡ç† -->
                        <div class="data-management">
                            <p class="data-info">ğŸ’¡ æ—¥è®°æ•°æ®åŒæ ·ä¿å­˜åœ¨æ‚¨çš„æ‰‹æœºæµè§ˆå™¨æœ¬åœ°å­˜å‚¨ä¸­ã€‚ä»¥ä¸‹æ˜¯å¯¹æ—¥è®°çš„ç®¡ç†åŠŸèƒ½ï¼š</p>
                            <div class="data-actions">
                                <button class="data-btn" id="exportDiaryBtn">å¯¼å‡ºæ—¥è®°</button>
                                <button class="data-btn" id="importDiaryBtn">å¯¼å…¥æ—¥è®°</button>
                                <button class="data-btn" id="clearDiaryBtn">æ¸…ç©ºæ—¥è®°</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- å¡ç‰‡3: ä¸“å±æ¶ˆæ¯ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <h3 class="card-title">ç»™æ¸©æœæ¸…çš„è¯</h3>
                </div>
                <div class="card-content">
                    <p style="line-height: 1.8; font-size: 1.2rem; margin-bottom: 20px;">
                        æ¸©æœæ¸…ï¼Œä½ çŸ¥é“å—ï¼Ÿ<br>
                        æ¯æ¬¡å’Œä½ èŠå¤©éƒ½åƒåœ¨æ˜Ÿç©ºä¸­å‘ç°ä¸€é¢—æ–°æ˜Ÿæ˜Ÿï¼Œ<br>
                        åœ¨æ— æ•°ä¸ªå¹³è¡Œå®‡å®™ä¸­ï¼Œæˆ‘å¾ˆåº†å¹¸åœ¨è¿™ä¸ªå®‡å®™é‡è§äº†ä½ ã€‚<br>
                        å°±åƒæ˜Ÿæ˜Ÿä¸ä¼šè¯´è¯ï¼Œä½†å¤œç©ºçŸ¥é“å®ƒçš„å­˜åœ¨ã€‚
                    </p>
                    <div style="padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: 15px; border-left: 4px solid #ffd93d;">
                        <p style="color: #ffd93d; font-style: italic; text-align: center; font-size: 1.3rem;">
                            "æœ‰äº›è¯ä¸å¿…è¯´å‡ºå£ï¼Œå› ä¸ºçœ¼ç¥å·²ç»ä¼ è¾¾äº†ä¸€åˆ‡ã€‚<br>
                            æ„¿è¿™ä¸€åˆ»çš„å®é™ï¼Œæˆä¸ºæˆ‘ä»¬ä¹‹é—´æœ€ç¾çš„è¯­è¨€ã€‚"
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>è¿™ç‰‡æ˜Ÿç©ºæ°¸è¿œä¸ºä½ ä¿ç•™ âœ¨</p>
            <p style="margin-top: 10px; font-size: 0.8rem; color: #a8d8ea;">
                æ•°æ®ä¿å­˜è¯´æ˜ï¼šæ„¿æœ›å’Œæ—¥è®°ä¿å­˜åœ¨æ‚¨çš„æ‰‹æœºæµè§ˆå™¨æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨
            </p>
        </footer>
    </div>
    
    <!-- éŸ³ä¹æ’­æ”¾å™¨ -->
    <div class="music-player" id="musicPlayer">
        <div class="music-controls">
            <button class="music-btn" id="playBtn">
                <i class="fas fa-play"></i>
            </button>
            <div class="music-info" id="musicInfo">
                <span class="music-status" id="musicStatus"></span>
                ç‚¹å‡»æ’­æ”¾éŸ³ä¹
            </div>
        </div>
        <div class="music-selector">
            <select class="music-select" id="musicSelect">
                <option value="">é€‰æ‹©éŸ³ä¹...</option>
                <!-- éŸ³ä¹é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
            </select>
        </div>
    </div>
    
    <!-- æ¶ˆæ¯æç¤º -->
    <div class="message-toast" id="messageToast"></div>

    <script>
        // ç­‰å¾…DOMåŠ è½½å®Œæˆ
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOMåŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–");
            
            // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
            setTimeout(() => {
                const loader = document.getElementById('loader');
                loader.classList.add('hidden');
                
                // åˆå§‹åŒ–åº”ç”¨
                initApp();
            }, 1000);
        });
        
        // åˆå§‹åŒ–åº”ç”¨
        function initApp() {
            // 1. åˆ›å»ºåŠ¨æ€æ˜Ÿç©º
            createDynamicStars();
            
            // 2. åˆå§‹åŒ–ä¸­å¤®æ˜Ÿæ˜Ÿ
            initCenterStar();
            
            // 3. åˆå§‹åŒ–å¡ç‰‡äº¤äº’
            initCards();
            
            // 4. åˆå§‹åŒ–éŸ³ä¹æ’­æ”¾å™¨ - åŒ…å«ç½‘æ˜“äº‘éŸ³ä¹åˆ—è¡¨
            initMusicPlayerWithNetEase();
            
            // 5. åˆå§‹åŒ–éªŒè¯ç³»ç»Ÿ
            initVerificationSystem();
            
            // 6. å¼€å§‹æµæ˜Ÿé›¨
            startMeteorShower();
            
            // 7. åˆå§‹åŒ–æ—¥è®°æœ¬åŠŸèƒ½
            initDiary();
            
            console.log("åº”ç”¨åˆå§‹åŒ–å®Œæˆ");
        }
        
        // åˆ›å»ºåŠ¨æ€æ˜Ÿç©º
        function createDynamicStars() {
            const container = document.getElementById('starField');
            
            // åˆ›å»ºé—ªçƒçš„æ˜Ÿæ˜Ÿ
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                
                // éšæœºå¤§å°
                const size = Math.random() * 3 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                // éšæœºä½ç½®
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                
                // éšæœºäº®åº¦
                star.style.opacity = Math.random() * 0.7 + 0.3;
                
                // éšæœºé—ªçƒåŠ¨ç”»
                const duration = Math.random() * 5 + 3;
                const delay = Math.random() * 5;
                star.style.animation = `twinkle ${duration}s infinite ${delay}s`;
                
                container.appendChild(star);
            }
            
            // æ·»åŠ é—ªçƒåŠ¨ç”»
            const style = document.createElement('style');
            style.textContent = `
                @keyframes twinkle {
                    0%, 100% { opacity: 0.3; }
                    50% { opacity: 1; }
                }
            `;
            document.head.appendChild(style);
        }
        
        // åˆå§‹åŒ–ä¸­å¤®æ˜Ÿæ˜Ÿ
        function initCenterStar() {
            const centerStar = document.getElementById('centerStar');
            
            // ç‚¹å‡»äº‹ä»¶
            centerStar.addEventListener('click', function(e) {
                e.stopPropagation();
                
                // æ·»åŠ è„‰å†²æ•ˆæœ
                this.style.animation = 'none';
                void this.offsetWidth; // è§¦å‘é‡ç»˜
                this.style.animation = 'starFloat 6s ease-in-out infinite';
                
                // åˆ›å»ºç²’å­æ•ˆæœ
                createStarParticles(this.getBoundingClientRect());
                
                // æ˜¾ç¤ºæ¶ˆæ¯
                showMessage("æ˜Ÿæ˜Ÿä¸ºä½ é—ªçƒ âœ¨");
            });
            
            // è§¦æ‘¸äº‹ä»¶
            centerStar.addEventListener('touchstart', function(e) {
                e.stopPropagation();
                this.style.transform = 'scale(0.95)';
            }, { passive: true });
            
            centerStar.addEventListener('touchend', function(e) {
                e.stopPropagation();
                this.style.transform = 'scale(1)';
            }, { passive: true });
        }
        
        // åˆå§‹åŒ–å¡ç‰‡äº¤äº’
        function initCards() {
            // ä¸ºæ¯ä¸ªå¡ç‰‡æ·»åŠ ç‚¹å‡»æ•ˆæœ
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                // ç‚¹å‡»æ•ˆæœ
                card.addEventListener('click', function(e) {
                    // é˜²æ­¢äº‹ä»¶å†’æ³¡
                    if (e.target.tagName === 'BUTTON' || 
                        e.target.tagName === 'TEXTAREA' || 
                        e.target.tagName === 'INPUT') {
                        return;
                    }
                    
                    // æ·»åŠ ç‚¹å‡»æ•ˆæœ
                    this.style.transform = 'translateY(-5px)';
                    setTimeout(() => {
                        this.style.transform = 'translateY(-10px)';
                    }, 200);
                });
            });
        }
        
        // åˆå§‹åŒ–éŸ³ä¹æ’­æ”¾å™¨ - åŒ…å«ç½‘æ˜“äº‘éŸ³ä¹åˆ—è¡¨
        function initMusicPlayerWithNetEase() {
            const playBtn = document.getElementById('playBtn');
            const musicInfo = document.getElementById('musicInfo');
            const musicStatus = document.getElementById('musicStatus');
            const musicSelect = document.getElementById('musicSelect');
            
            // ç½‘æ˜“äº‘éŸ³ä¹åˆ—è¡¨
            const musicList = [
                {
                    id: 1,
                    name: "æ˜Ÿç©ºé’¢ç´æ›² - çº¯éŸ³ä¹",
                    artist: "é’¢ç´å®¶",
                    url: "https://music.163.com/song/media/outer/url?id=1330348068.mp3"
                },
                {
                    id: 2,
                    name: "å®é™å¤œæ™š - è½»éŸ³ä¹",
                    artist: "è½»éŸ³ä¹å›¢",
                    url: "https://music.163.com/song/media/outer/url?id=29723014.mp3"
                },
                {
                    id: 3,
                    name: "æ˜Ÿç©ºå°å¤œæ›²",
                    artist: "æ˜Ÿç©ºä¹å›¢",
                    url: "https://music.163.com/song/media/outer/url?id=1330348068.mp3?from=singlemessage"
                },
                {
                    id: 4,
                    name: "æ¢¦å¹»é’¢ç´æ›²",
                    artist: "é’¢ç´å®¶",
                    url: "https://music.163.com/song/media/outer/url?id=29723014.mp3?from=singlemessage"
                },
                {
                    id: 5,
                    name: "å¤œç©ºä¸‹çš„æ€å¿µ",
                    artist: "çº¯éŸ³ä¹",
                    url: "https://music.163.com/song/media/outer/url?id=1330348068.mp3?from=singlemessage&isappinstalled=0"
                }
            ];
            
            // åˆ›å»ºéŸ³é¢‘å…ƒç´ 
            const audio = new Audio();
            audio.volume = 0.3; // 30%éŸ³é‡
            audio.loop = true;
            
            // å½“å‰æ’­æ”¾çŠ¶æ€
            let isPlaying = false;
            let audioInitialized = false;
            let currentMusicIndex = 0;
            
            // å¡«å……éŸ³ä¹é€‰æ‹©å™¨
            musicList.forEach((music, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${music.name} - ${music.artist}`;
                musicSelect.appendChild(option);
            });
            
            // æ›´æ–°æ’­æ”¾çŠ¶æ€æ˜¾ç¤º
            function updateMusicStatus(playing) {
                isPlaying = playing;
                if (playing) {
                    playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                    musicStatus.className = 'music-status playing';
                    const currentMusic = musicList[currentMusicIndex];
                    musicInfo.innerHTML = `<span class="music-status playing"></span>æ­£åœ¨æ’­æ”¾: ${currentMusic.name}`;
                } else {
                    playBtn.innerHTML = '<i class="fas fa-play"></i>';
                    musicStatus.className = 'music-status';
                    musicInfo.innerHTML = `<span class="music-status"></span>ç‚¹å‡»æ’­æ”¾éŸ³ä¹`;
                }
            }
            
            // åˆå§‹åŒ–çŠ¶æ€
            updateMusicStatus(false);
            
            // åŠ è½½å¹¶æ’­æ”¾éŸ³ä¹
            function loadAndPlayMusic(index) {
                if (index < 0 || index >= musicList.length) return;
                
                currentMusicIndex = index;
                const music = musicList[index];
                
                // æ›´æ–°é€‰æ‹©å™¨
                musicSelect.value = index;
                
                // åŠ è½½éŸ³ä¹
                audio.src = music.url;
                audio.load();
                
                // æ›´æ–°æ˜¾ç¤º
                musicInfo.innerHTML = `<span class="music-status"></span>æ­£åœ¨åŠ è½½: ${music.name}`;
                
                // æ’­æ”¾éŸ³ä¹
                const playPromise = audio.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log("éŸ³ä¹å¼€å§‹æ’­æ”¾:", music.name);
                        updateMusicStatus(true);
                    }).catch(error => {
                        console.error("æ’­æ”¾å¤±è´¥:", error);
                        showMessage("æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–é€‰æ‹©å…¶ä»–éŸ³ä¹");
                        updateMusicStatus(false);
                    });
                }
            }
            
            // æ’­æ”¾æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            playBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                e.preventDefault();
                
                if (!audioInitialized) {
                    // å°è¯•åˆå§‹åŒ–éŸ³é¢‘
                    audio.volume = 0;
                    const unlockPromise = audio.play();
                    
                    if (unlockPromise !== undefined) {
                        unlockPromise.then(() => {
                            // è§£é”æˆåŠŸ
                            audio.pause();
                            audio.volume = 0.3;
                            audioInitialized = true;
                            
                            // å¦‚æœéŸ³ä¹é€‰æ‹©å™¨æœ‰é€‰ä¸­ï¼Œæ’­æ”¾é€‰ä¸­çš„éŸ³ä¹
                            if (musicSelect.value !== "") {
                                loadAndPlayMusic(parseInt(musicSelect.value));
                            } else {
                                // å¦åˆ™æ’­æ”¾ç¬¬ä¸€é¦–éŸ³ä¹
                                loadAndPlayMusic(0);
                            }
                        }).catch(error => {
                            console.log("éŸ³é¢‘è§£é”å¤±è´¥:", error);
                            showMessage("è¯·å…ˆç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®ï¼Œå†æ’­æ”¾éŸ³ä¹");
                        });
                    }
                } else {
                    // éŸ³é¢‘å·²åˆå§‹åŒ–
                    if (isPlaying) {
                        // å¦‚æœæ­£åœ¨æ’­æ”¾ï¼Œåˆ™æš‚åœ
                        audio.pause();
                        updateMusicStatus(false);
                    } else {
                        // å¦‚æœæœªæ’­æ”¾ï¼Œåˆ™å¼€å§‹æ’­æ”¾
                        if (musicSelect.value !== "") {
                            loadAndPlayMusic(parseInt(musicSelect.value));
                        } else {
                            // å¦‚æœæ²¡æœ‰é€‰æ‹©ï¼Œæ’­æ”¾ç¬¬ä¸€é¦–
                            loadAndPlayMusic(0);
                        }
                    }
                }
            });
            
            // éŸ³ä¹é€‰æ‹©å™¨å˜åŒ–äº‹ä»¶
            musicSelect.addEventListener('change', function() {
                if (this.value !== "") {
                    loadAndPlayMusic(parseInt(this.value));
                }
            });
            
            // é¡µé¢ç‚¹å‡»äº‹ä»¶æ¥è§£é”éŸ³é¢‘
            document.addEventListener('click', function() {
                if (!audioInitialized) {
                    audioInitialized = true;
                    console.log("éŸ³é¢‘å·²é€šè¿‡é¡µé¢ç‚¹å‡»è§£é”");
                }
            }, { once: true });
            
            // éŸ³ä¹ç»“æŸäº‹ä»¶
            audio.addEventListener('ended', function() {
                console.log("éŸ³ä¹æ’­æ”¾ç»“æŸ");
                updateMusicStatus(false);
                
                // è‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€ä¸ªéŸ³ä¹
                const nextIndex = (currentMusicIndex + 1) % musicList.length;
                setTimeout(() => {
                    loadAndPlayMusic(nextIndex);
                }, 2000);
            });
            
            // éŸ³ä¹é”™è¯¯å¤„ç†
            audio.addEventListener('error', function(e) {
                console.error("éŸ³ä¹åŠ è½½é”™è¯¯:", e);
                showMessage("éŸ³ä¹åŠ è½½å¤±è´¥ï¼Œå°†å°è¯•ä¸‹ä¸€é¦–");
                
                // å°è¯•ä¸‹ä¸€ä¸ªéŸ³ä¹æº
                const nextIndex = (currentMusicIndex + 1) % musicList.length;
                if (nextIndex !== currentMusicIndex) {
                    setTimeout(() => {
                        loadAndPlayMusic(nextIndex);
                    }, 1000);
                }
            });
            
            // éŸ³ä¹æ’­æ”¾çŠ¶æ€ç›‘å¬
            audio.addEventListener('play', function() {
                updateMusicStatus(true);
            });
            
            audio.addEventListener('pause', function() {
                updateMusicStatus(false);
            });
            
            // åˆå§‹é€‰æ‹©ç¬¬ä¸€é¦–éŸ³ä¹
            if (musicList.length > 0) {
                audio.src = musicList[0].url;
                musicInfo.innerHTML = `<span class="music-status"></span>å‡†å¤‡æ’­æ”¾: ${musicList[0].name}`;
            }
        }
        
        // åˆå§‹åŒ–éªŒè¯ç³»ç»Ÿ
        function initVerificationSystem() {
            const verifyBtn = document.getElementById('verifyBtn');
            const hintBtn = document.getElementById('hintBtn');
            const verificationCodeInput = document.getElementById('verificationCode');
            const wishForm = document.getElementById('wishForm');
            
            // è®¾ç½®éªŒè¯ç 
            const correctCode = "0325"; // å¯ä»¥ä¿®æ”¹ä¸ºæ‚¨è®¾ç½®çš„éªŒè¯ç 
            
            // éªŒè¯æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            verifyBtn.addEventListener('click', function() {
                const enteredCode = verificationCodeInput.value.trim();
                
                if (!enteredCode) {
                    showMessage("è¯·è¾“å…¥éªŒè¯ç ");
                    return;
                }
                
                if (enteredCode === correctCode) {
                    // éªŒè¯æˆåŠŸ
                    wishForm.classList.remove('hidden');
                    showMessage("éªŒè¯æˆåŠŸï¼ğŸ‰ ç°åœ¨å¯ä»¥ä¿å­˜å’Œå‘é€æ„¿æœ›äº†");
                    
                    // æ¸…ç©ºéªŒè¯ç è¾“å…¥æ¡†
                    verificationCodeInput.value = '';
                    
                    // åˆå§‹åŒ–æ„¿æœ›æ¸…å•åŠŸèƒ½
                    initWishList();
                } else {
                    showMessage("éªŒè¯ç é”™è¯¯ï¼Œè¯·é‡è¯•");
                    verificationCodeInput.value = '';
                    verificationCodeInput.focus();
                }
            });
            
            // æç¤ºæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            hintBtn.addEventListener('click', function() {
                showMessage("æç¤ºï¼šæƒ³æƒ³å¯¹ä½ æ¥è¯´æœ‰ç‰¹æ®Šæ„ä¹‰çš„æ—¥æœŸ");
            });
            
            // å›è½¦é”®éªŒè¯
            verificationCodeInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    verifyBtn.click();
                }
            });
        }
        
        // åˆå§‹åŒ–æ„¿æœ›æ¸…å•
        function initWishList() {
            const saveWishBtn = document.getElementById('saveWishBtn');
            const sendWishBtn = document.getElementById('sendWishBtn');
            const wishInput = document.getElementById('wishInput');
            const wishName = document.getElementById('wishName');
            const wishList = document.getElementById('wishList');
            const exportWishesBtn = document.getElementById('exportWishesBtn');
            const importWishesBtn = document.getElementById('importWishesBtn');
            const clearWishesBtn = document.getElementById('clearWishesBtn');
            
            // è·å–ä»Šå¤©çš„æ—¥æœŸå­—ç¬¦ä¸²
            function getTodayDateString() {
                const today = new Date();
                return `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
            }
            
            // æ›´æ–°æ„¿æœ›ç»Ÿè®¡
            function updateWishStats() {
                const wishes = JSON.parse(localStorage.getItem('starWishes') || '[]');
                const today = getTodayDateString();
                
                // è®¡ç®—ä»Šæ—¥æ„¿æœ›æ•°é‡
                const todayWishes = wishes.filter(wish => {
                    const wishDate = wish.timestamp.split(' ')[0];
                    return wishDate === today;
                }).length;
                
                // æ›´æ–°æ˜¾ç¤º
                document.getElementById('totalWishes').textContent = wishes.length;
                document.getElementById('todayWishes').textContent = todayWishes;
            }
            
            // ä¿å­˜æ„¿æœ›
            saveWishBtn.addEventListener('click', function() {
                const wishText = wishInput.value.trim();
                const name = wishName.value.trim();
                
                if (!wishText) {
                    showMessage("è¯·è¾“å…¥æ„¿æœ›å†…å®¹");
                    return;
                }
                
                // è·å–ç°æœ‰æ„¿æœ›
                let wishes = JSON.parse(localStorage.getItem('starWishes') || '[]');
                
                // æ·»åŠ æ–°æ„¿æœ›
                const newWish = {
                    id: Date.now(),
                    text: wishText,
                    name: name || "åŒ¿å",
                    timestamp: new Date().toLocaleString('zh-CN')
                };
                
                wishes.push(newWish);
                localStorage.setItem('starWishes', JSON.stringify(wishes));
                
                // æ›´æ–°æ„¿æœ›åˆ—è¡¨æ˜¾ç¤º
                updateWishListDisplay();
                
                // æ›´æ–°ç»Ÿè®¡
                updateWishStats();
                
                // æ¸…ç©ºè¾“å…¥æ¡†
                wishInput.value = '';
                wishName.value = '';
                
                // æ˜¾ç¤ºæ¶ˆæ¯
                showMessage("æ„¿æœ›å·²ä¿å­˜åˆ°æ˜Ÿç©ºä¸­ âœ¨");
                
                // åˆ›å»ºæ„¿æœ›æ˜Ÿæ˜Ÿ
                createWishStar();
            });
            
            // å‘é€æ„¿æœ›åˆ°é‚®ç®±
            sendWishBtn.addEventListener('click', async function() {
                const wishes = JSON.parse(localStorage.getItem('starWishes') || '[]');
                
                if (wishes.length === 0) {
                    showMessage("è¿˜æ²¡æœ‰ä¿å­˜çš„æ„¿æœ›");
                    return;
                }
                
                // æ˜¾ç¤ºå‘é€ä¸­æç¤º
                showMessage("æ­£åœ¨å‡†å¤‡å‘é€æ„¿æœ›...");
                
                // æ„å»ºé‚®ä»¶å†…å®¹
                let mailContent = "æ¥è‡ªæ˜Ÿç©ºæ„¿æœ›æ¸…å•çš„æ„¿æœ›ï¼š\n\n";
                
                wishes.forEach((wish, index) => {
                    mailContent += `${index + 1}. ${wish.text}\n`;
                    mailContent += `   æ¥è‡ª: ${wish.name}\n`;
                    mailContent += `   æ—¶é—´: ${wish.timestamp}\n\n`;
                });
                
                // ä½¿ç”¨mailtoé“¾æ¥
                const subject = "æ¥è‡ªæ˜Ÿç©ºæ„¿æœ›æ¸…å•çš„æ„¿æœ›";
                const body = encodeURIComponent(mailContent);
                const mailtoLink = `mailto:your_email@example.com?subject=${encodeURIComponent(subject)}&body=${body}`;
                
                // æ‰“å¼€é‚®ä»¶å®¢æˆ·ç«¯
                window.open(mailtoLink, '_blank');
                
                showMessage("å·²æ‰“å¼€é‚®ä»¶å®¢æˆ·ç«¯ï¼Œè¯·ç‚¹å‡»å‘é€");
            });
            
            // å¯¼å‡ºæ„¿æœ›
            exportWishesBtn.addEventListener('click', function() {
                const wishes = JSON.parse(localStorage.getItem('starWishes') || '[]');
                
                if (wishes.length === 0) {
                    showMessage("æ²¡æœ‰æ„¿æœ›å¯ä»¥å¯¼å‡º");
                    return;
                }
                
                // åˆ›å»ºå¯¼å‡ºçš„æ•°æ®
                const exportData = {
                    type: "æ˜Ÿç©ºæ„¿æœ›æ¸…å•å¯¼å‡º",
                    version: "1.0",
                    exportDate: new Date().toLocaleString('zh-CN'),
                    wishes: wishes
                };
                
                // åˆ›å»ºJSONæ–‡ä»¶
                const dataStr = JSON.stringify(exportData, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                // åˆ›å»ºä¸‹è½½é“¾æ¥
                const exportFileDefaultName = 'æ˜Ÿç©ºæ„¿æœ›æ¸…å•å¤‡ä»½.json';
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
                
                showMessage("æ„¿æœ›å·²å¯¼å‡ºä¸ºJSONæ–‡ä»¶");
            });
            
            // å¯¼å…¥æ„¿æœ›
            importWishesBtn.addEventListener('click', function() {
                // åˆ›å»ºæ–‡ä»¶è¾“å…¥æ¡†
                const fileInput = document.createElement('input');
                fileInput.type = 'file';
                fileInput.accept = '.json';
                
                fileInput.onchange = function(e) {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const importData = JSON.parse(e.target.result);
                            
                            // éªŒè¯å¯¼å…¥æ•°æ®æ ¼å¼
                            if (!importData.wishes || !Array.isArray(importData.wishes)) {
                                showMessage("å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®");
                                return;
                            }
                            
                            // åˆå¹¶æ„¿æœ›ï¼ˆé¿å…é‡å¤ï¼‰
                            const existingWishes = JSON.parse(localStorage.getItem('starWishes') || '[]');
                            const existingIds = new Set(existingWishes.map(wish => wish.id));
                            
                            // è¿‡æ»¤æ‰å·²å­˜åœ¨çš„æ„¿æœ›
                            const newWishes = importData.wishes.filter(wish => !existingIds.has(wish.id));
                            
                            if (newWishes.length === 0) {
                                showMessage("æ²¡æœ‰æ–°çš„æ„¿æœ›å¯ä»¥å¯¼å…¥");
                                return;
                            }
                            
                            // åˆå¹¶æ„¿æœ›
                            const mergedWishes = [...existingWishes, ...newWishes];
                            localStorage.setItem('starWishes', JSON.stringify(mergedWishes));
                            
                            // æ›´æ–°æ˜¾ç¤º
                            updateWishListDisplay();
                            updateWishStats();
                            
                            showMessage(`æˆåŠŸå¯¼å…¥ ${newWishes.length} ä¸ªæ„¿æœ›`);
                        } catch (error) {
                            console.error("å¯¼å…¥å¤±è´¥:", error);
                            showMessage("å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®");
                        }
                    };
                    reader.readAsText(file);
                };
                
                fileInput.click();
            });
            
            // æ¸…ç©ºæ„¿æœ›
            clearWishesBtn.addEventListener('click', function() {
                if (confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ„¿æœ›å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚")) {
                    localStorage.removeItem('starWishes');
                    updateWishListDisplay();
                    updateWishStats();
                    showMessage("æ‰€æœ‰æ„¿æœ›å·²æ¸…ç©º");
                }
            });
            
            // åˆå§‹åŒ–æ„¿æœ›åˆ—è¡¨æ˜¾ç¤º
            function updateWishListDisplay() {
                const wishes = JSON.parse(localStorage.getItem('starWishes') || '[]');
                
                if (wishes.length === 0) {
                    wishList.innerHTML = '<p style="color: #a8d8ea; text-align: center; padding: 20px;">æš‚æ— æ„¿æœ›ï¼Œå†™ä¸‹ç¬¬ä¸€ä¸ªæ„¿æœ›å§</p>';
                    return;
                }
                
                wishList.innerHTML = '';
                
                // æŒ‰æ—¶é—´å€’åºæ’åˆ—
                wishes.sort((a, b) => b.id - a.id).forEach(wish => {
                    const wishItem = document.createElement('div');
                    wishItem.className = 'wish-item';
                    wishItem.innerHTML = `
                        <p>${wish.text}</p>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 5px;">
                            <span style="font-size: 0.8rem; color: #a8d8ea;">æ¥è‡ª: ${wish.name}</span>
                            <span style="font-size: 0.8rem; color: #a8d8ea;">${wish.timestamp}</span>
                        </div>
                    `;
                    wishList.appendChild(wishItem);
                });
            }
            
            // åˆå§‹åŠ è½½æ„¿æœ›åˆ—è¡¨
            updateWishListDisplay();
            updateWishStats();
        }
        
        // åˆå§‹åŒ–æ—¥è®°æœ¬åŠŸèƒ½
        function initDiary() {
            const saveDiaryBtn = document.getElementById('saveDiaryBtn');
            const clearDiaryInputBtn = document.getElementById('clearDiaryInputBtn');
            const exportDiaryBtn = document.getElementById('exportDiaryBtn');
            const importDiaryBtn = document.getElementById('importDiaryBtn');
            const clearDiaryBtn = document.getElementById('clearDiaryBtn');
            const diaryInput = document.getElementById('diaryInput');
            const diaryEntries = document.getElementById('diaryEntries');
            
            // åŠ è½½å·²ä¿å­˜çš„æ—¥è®°
            function loadDiaryEntries() {
                const entries = JSON.parse(localStorage.getItem('starDiary') || '[]');
                
                if (entries.length === 0) {
                    diaryEntries.innerHTML = '<p style="color: #a8d8ea; text-align: center; padding: 20px;">è¿˜æ²¡æœ‰æ—¥è®°ï¼Œå†™ä¸‹ç¬¬ä¸€ç¯‡æ—¥è®°å§</p>';
                    return;
                }
                
                diaryEntries.innerHTML = '';
                
                // æŒ‰æ—¶é—´å€’åºæ’åˆ—
                entries.sort((a, b) => b.id - a.id).forEach(entry => {
                    const entryElement = document.createElement('div');
                    entryElement.className = 'diary-entry';
                    entryElement.innerHTML = `
                        <div class="diary-date">${entry.date}</div>
                        <div class="diary-content">${entry.content}</div>
                    `;
                    diaryEntries.appendChild(entryElement);
                });
            }
            
            // ä¿å­˜æ—¥è®°
            saveDiaryBtn.addEventListener('click', function() {
                const content = diaryInput.value.trim();
                
                if (!content) {
                    showMessage("è¯·è¾“å…¥æ—¥è®°å†…å®¹");
                    return;
                }
                
                // è·å–ç°æœ‰æ—¥è®°
                let entries = JSON.parse(localStorage.getItem('starDiary') || '[]');
                
                // æ·»åŠ æ–°æ—¥è®°
                const newEntry = {
                    id: Date.now(),
                    content: content,
                    date: new Date().toLocaleString('zh-CN')
                };
                
                entries.push(newEntry);
                localStorage.setItem('starDiary', JSON.stringify(entries));
                
                // é‡æ–°åŠ è½½æ—¥è®°
                loadDiaryEntries();
                
                // æ¸…ç©ºè¾“å…¥æ¡†
                diaryInput.value = '';
                
                // æ˜¾ç¤ºæ¶ˆæ¯
                showMessage("æ—¥è®°å·²ä¿å­˜ âœ¨");
                
                // åˆ›å»ºæ—¥è®°æ˜Ÿæ˜Ÿ
                createDiaryStar();
            });
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            clearDiaryInputBtn.addEventListener('click', function() {
                if (diaryInput.value.trim() && confirm("ç¡®å®šè¦æ¸…ç©ºè¾“å…¥æ¡†å—ï¼Ÿ")) {
                    diaryInput.value = '';
                }
            });
            
            // å¯¼å‡ºæ—¥è®°
            exportDiaryBtn.addEventListener('click', function() {
                const entries = JSON.parse(localStorage.getItem('starDiary') || '[]');
                
                if (entries.length === 0) {
                    showMessage("æ²¡æœ‰æ—¥è®°å¯ä»¥å¯¼å‡º");
                    return;
                }
                
                // åˆ›å»ºå¯¼å‡ºçš„æ•°æ®
                const exportData = {
                    type: "æ˜Ÿç©ºæ—¥è®°æœ¬å¯¼å‡º",
                    version: "1.0",
                    exportDate: new Date().toLocaleString('zh-CN'),
                    entries: entries
                };
                
                // åˆ›å»ºJSONæ–‡ä»¶
                const dataStr = JSON.stringify(exportData, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                // åˆ›å»ºä¸‹è½½é“¾æ¥
                const exportFileDefaultName = 'æ˜Ÿç©ºæ—¥è®°æœ¬å¤‡ä»½.json';
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
                
                showMessage("æ—¥è®°å·²å¯¼å‡ºä¸ºJSONæ–‡ä»¶");
            });
            
            // å¯¼å…¥æ—¥è®°
            importDiaryBtn.addEventListener('click', function() {
                // åˆ›å»ºæ–‡ä»¶è¾“å…¥æ¡†
                const fileInput = document.createElement('input');
                fileInput.type = 'file';
                fileInput.accept = '.json';
                
                fileInput.onchange = function(e) {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const importData = JSON.parse(e.target.result);
                            
                            // éªŒè¯å¯¼å…¥æ•°æ®æ ¼å¼
                            if (!importData.entries || !Array.isArray(importData.entries)) {
                                showMessage("å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®");
                                return;
                            }
                            
                            // åˆå¹¶æ—¥è®°ï¼ˆé¿å…é‡å¤ï¼‰
                            const existingEntries = JSON.parse(localStorage.getItem('starDiary') || '[]');
                            const existingIds = new Set(existingEntries.map(entry => entry.id));
                            
                            // è¿‡æ»¤æ‰å·²å­˜åœ¨çš„æ—¥è®°
                            const newEntries = importData.entries.filter(entry => !existingIds.has(entry.id));
                            
                            if (newEntries.length === 0) {
                                showMessage("æ²¡æœ‰æ–°çš„æ—¥è®°å¯ä»¥å¯¼å…¥");
                                return;
                            }
                            
                            // åˆå¹¶æ—¥è®°
                            const mergedEntries = [...existingEntries, ...newEntries];
                            localStorage.setItem('starDiary', JSON.stringify(mergedEntries));
                            
                            // æ›´æ–°æ˜¾ç¤º
                            loadDiaryEntries();
                            
                            showMessage(`æˆåŠŸå¯¼å…¥ ${newEntries.length} ç¯‡æ—¥è®°`);
                        } catch (error) {
                            console.error("å¯¼å…¥å¤±è´¥:", error);
                            showMessage("å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®");
                        }
                    };
                    reader.readAsText(file);
                };
                
                fileInput.click();
            });
            
            // æ¸…ç©ºæ—¥è®°
            clearDiaryBtn.addEventListener('click', function() {
                if (confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ—¥è®°å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚")) {
                    localStorage.removeItem('starDiary');
                    loadDiaryEntries();
                    showMessage("æ‰€æœ‰æ—¥è®°å·²æ¸…ç©º");
                }
            });
            
            // åˆå§‹åŠ è½½æ—¥è®°
            loadDiaryEntries();
        }
        
        // åˆ›å»ºæ„¿æœ›æ˜Ÿæ˜Ÿ
        function createWishStar() {
            const star = document.createElement('div');
            star.style.position = 'fixed';
            star.style.fontSize = '20px';
            star.style.color = '#ffd93d';
            star.style.zIndex = '1';
            star.style.pointerEvents = 'none';
            star.innerHTML = 'â­';
            
            // éšæœºä½ç½®
            const x = Math.random() * 80 + 10;
            const y = Math.random() * 80 + 10;
            star.style.left = `${x}%`;
            star.style.top = `${y}%`;
            
            document.body.appendChild(star);
            
            // åŠ¨ç”»æ•ˆæœ
            star.animate([
                { transform: 'scale(0) rotate(0deg)', opacity: 0 },
                { transform: 'scale(1) rotate(360deg)', opacity: 1 }
            ], {
                duration: 500,
                easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
            });
            
            // 5ç§’åæ·¡å‡º
            setTimeout(() => {
                star.animate([
                    { transform: 'scale(1) rotate(0deg)', opacity: 1 },
                    { transform: 'scale(0) rotate(360deg)', opacity: 0 }
                ], {
                    duration: 1000,
                    easing: 'ease-out'
                }).onfinish = () => {
                    if (star.parentNode) {
                        document.body.removeChild(star);
                    }
                };
            }, 5000);
        }
        
        // åˆ›å»ºæ—¥è®°æ˜Ÿæ˜Ÿ
        function createDiaryStar() {
            const star = document.createElement('div');
            star.style.position = 'fixed';
            star.style.fontSize = '20px';
            star.style.color = '#a8d8ea';
            star.style.zIndex = '1';
            star.style.pointerEvents = 'none';
            star.innerHTML = 'ğŸ““';
            
            // éšæœºä½ç½®
            const x = Math.random() * 80 + 10;
            const y = Math.random() * 80 + 10;
            star.style.left = `${x}%`;
            star.style.top = `${y}%`;
            
            document.body.appendChild(star);
            
            // åŠ¨ç”»æ•ˆæœ
            star.animate([
                { transform: 'scale(0) rotate(0deg)', opacity: 0 },
                { transform: 'scale(1) rotate(360deg)', opacity: 1 }
            ], {
                duration: 500,
                easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
            });
            
            // 5ç§’åæ·¡å‡º
            setTimeout(() => {
                star.animate([
                    { transform: 'scale(1) rotate(0deg)', opacity: 1 },
                    { transform: 'scale(0) rotate(360deg)', opacity: 0 }
                ], {
                    duration: 1000,
                    easing: 'ease-out'
                }).onfinish = () => {
                    if (star.parentNode) {
                        document.body.removeChild(star);
                    }
                };
            }, 5000);
        }
        
        // å¼€å§‹æµæ˜Ÿé›¨
        function startMeteorShower() {
            // æ¯éš”ä¸€æ®µæ—¶é—´åˆ›å»ºä¸€ä¸ªæµæ˜Ÿ
            setInterval(() => {
                if (Math.random() > 0.7) { // 30%æ¦‚ç‡
                    createMeteor();
                }
            }, 8000);
        }
        
        // åˆ›å»ºæµæ˜Ÿ
        function createMeteor() {
            const meteor = document.createElement('div');
            meteor.className = 'shooting-star';
            
            // éšæœºèµ·å§‹ä½ç½®
            const startX = Math.random() * 100;
            const startY = -10;
            meteor.style.left = `${startX}%`;
            meteor.style.top = `${startY}%`;
            
            document.body.appendChild(meteor);
            
            // æµæ˜ŸåŠ¨ç”»
            meteor.animate([
                { transform: 'translate(0, 0) scale(1)', opacity: 0 },
                { transform: `translate(${Math.random() * 100 - 50}px, 100vh) scale(0)`, opacity: 1 }
            ], {
                duration: 2000,
                easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
            }).onfinish = () => {
                if (meteor.parentNode) {
                    document.body.removeChild(meteor);
                }
            };
        }
        
        // åˆ›å»ºæ˜Ÿæ˜Ÿç²’å­æ•ˆæœ
        function createStarParticles(rect) {
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.style.position = 'fixed';
                    particle.style.width = '8px';
                    particle.style.height = '8px';
                    particle.style.borderRadius = '50%';
                    particle.style.backgroundColor = '#ffd93d';
                    particle.style.left = `${centerX}px`;
                    particle.style.top = `${centerY}px`;
                    particle.style.zIndex = '1';
                    particle.style.pointerEvents = 'none';
                    particle.style.boxShadow = '0 0 10px #ffd93d';
                    
                    document.body.appendChild(particle);
                    
                    // ç²’å­çˆ†ç‚¸æ•ˆæœ
                    const angle = Math.random() * Math.PI * 2;
                    const distance = Math.random() * 50 + 30;
                    const duration = Math.random() * 1000 + 500;
                    
                    particle.animate([
                        { transform: 'translate(0, 0) scale(1)', opacity: 1 },
                        { transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(0)`, opacity: 0 }
                    ], {
                        duration: duration,
                        easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
                    }).onfinish = () => {
                        if (particle.parentNode) {
                            document.body.removeChild(particle);
                        }
                    };
                }, i * 50);
            }
        }
        
        // æ˜¾ç¤ºæ¶ˆæ¯æç¤º
        function showMessage(text) {
            const toast = document.getElementById('messageToast');
            toast.textContent = text;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
